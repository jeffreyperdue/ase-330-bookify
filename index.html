<!-- index.html (Login Page) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bookify â€“ Login</title>
  <link rel="stylesheet" href="css/auth.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <header>
    <h1 class="logo"><span class="book">Book</span><span class="ify">ify</span></h1>
  </header>

  <main class="auth-container">
    <div class="auth-card">
      <h2>Login</h2>
      <form id="login-form">
        <div class="input-group">
          <label>Email</label>
          <input type="email" id="email" required/>
        </div>

        <div class="input-group">
          <label>Password</label>
          <input type="password" id="password" required/>
        </div>

        <button class="auth-btn" type="submit">Login</button>
      </form>

      <div style="margin-top: 20px; padding: 15px; background: #2a2a2a; border-radius: 5px; border: 1px solid #444;">
        <p style="color: #ccc; font-size: 0.9rem; margin-bottom: 10px;"><strong>Test User (for user testing):</strong></p>
        <button type="button" id="test-user-btn" style="width: 100%; padding: 10px; background: #4A7C59; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">
          Login as Test User
        </button>
        <p style="color: #999; font-size: 0.8rem; margin-top: 8px; text-align: center;">This will initialize test data for user testing</p>
      </div>

      <p class="switch-text">Don't have an account? <a href="signup.html">Sign up</a></p>
    </div>
  </main>

  <script>
    // Test user functionality for user testing
    document.getElementById('test-user-btn').addEventListener('click', function() {
      // Initialize test user data
      localStorage.setItem('currentUser', 'test-user');
      localStorage.setItem('userEmail', 'test@bookify.com');
      
      // Initialize test shelf data (empty or with sample books)
      if (!localStorage.getItem('myShelf')) {
        localStorage.setItem('myShelf', JSON.stringify([]));
      }
      
      // Initialize test shelf settings
      if (!localStorage.getItem('shelfSettings')) {
        localStorage.setItem('shelfSettings', JSON.stringify({
          background: "#141414",
          texture: "none",
          color: "#8B4513",
          decorations: []
        }));
      }
      
      // Initialize shelves array
      if (!localStorage.getItem('shelves')) {
        localStorage.setItem('shelves', JSON.stringify([{
          id: 1,
          name: 'Custom Shelf #1',
          books: [],
          settings: {
            background: "#141414",
            texture: "none",
            color: "#8B4513",
            decorations: []
          }
        }]));
      }
      
      // Redirect to home page
      window.location.href = 'home.html';
    });

    // Regular login form handler
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      if (email && password) {
        // Store user session
        localStorage.setItem('currentUser', email);
        localStorage.setItem('userEmail', email);
        
        // Initialize user data if it doesn't exist
        if (!localStorage.getItem('myShelf')) {
          localStorage.setItem('myShelf', JSON.stringify([]));
        }
        if (!localStorage.getItem('shelfSettings')) {
          localStorage.setItem('shelfSettings', JSON.stringify({
            background: "#141414",
            texture: "none",
            color: "#8B4513",
            decorations: []
          }));
        }
        // Initialize shelves array if it doesn't exist
        if (!localStorage.getItem('shelves')) {
          localStorage.setItem('shelves', JSON.stringify([{
            id: 1,
            name: 'Custom Shelf #1',
            books: [],
            settings: {
              background: "#141414",
              texture: "none",
              color: "#8B4513",
              decorations: []
            }
          }]));
          localStorage.setItem('currentShelfId', '1');
        }
        
        // Redirect to home page
        window.location.href = 'home.html';
      }
    });
  </script>
</body>
</html>
